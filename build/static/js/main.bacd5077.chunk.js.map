{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","props","value","search","onChange","handleSearchChange","PersonForm","onSubmit","add","name","handleNameChange","number","handleNumberChange","type","Persons","contactsToShow","map","person","key","id","onClick","deletePerson","Notification","message","className","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","persons","setPersons","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","filter","toLowerCase","includes","updatePerson","find","returnedPerson","console","log","newPersonsArray","catch","error","setTimeout","event","target","preventDefault","nameObject","some","window","confirm","concat","index","findIndex","personsCopy","splice","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bacd5077.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = (props) => {\n    return (\n        <div>\n            Filter shown with: <input \n                                value={props.search}\n                                onChange={props.handleSearchChange}\n                                />\n        </div>\n    )\n\n}\n\nexport default Filter;","import React from \"react\";\n\nconst PersonForm = (props) => {\n    return (\n        <form onSubmit={props.add}>\n            <div>\n                Name: <input \n                        value={props.name}\n                        onChange={props.handleNameChange}/>\n            </div>\n            <div>\n                Number: <input \n                        value={props.number}\n                        onChange={props.handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">Add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm;","import React from \"react\";\n\nconst Persons = (props) => {\n    return(\n        <div>\n            {props.contactsToShow.map( (person) => \n                <div key={person.id}>\n                    <p key={person.id}>{person.name}: {person.number}</p>\n                    <button onClick={() => props.deletePerson(person.id)}>Delete Person</button>\n                </div>\n            )}\n        </div>\n    )\n}\nexport default Persons;","import React from \"react\";\n\nconst Notification = ( {message, type} ) => {\n    if (message === null) {\n        return null;\n    }\n\n    return (\n        <div className={type}>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification;","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then(response => response.data);\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then(response => response.data);\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    const response = request.then(response => response.data);\n    return response;\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then(response => response.data);\n}\n\nexport default { getAll, create, update, remove };","import React, {useState, useEffect} from 'react';\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newSearch, setNewSearch] = useState(\"\");\n  const [persons, setPersons] = useState([]);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // Populate data after rendering for the first time.\n  useEffect( () => {\n    personService \n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons);\n      })\n  }, []);\n\n  // Form change handlers\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  const handleSearchChange = (event) => {\n    setNewSearch(event.target.value);\n  }\n\n  // CRUD methods\n  const contactsToShow = persons.filter( (person) => person.name.toLowerCase().includes(newSearch.toLowerCase()));\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    if (persons.some( (person) => person.name === newName)){\n      const userWantsToUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with the new one?`);\n      if (userWantsToUpdate) {\n        const person = persons.find( (person) => person.name === newName);\n        updatePerson(person.id, nameObject);\n      }\n    } else {\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setSuccessMessage(`${nameObject.name} was successfully added to the database.`)\n          setTimeout( () => {\n            setSuccessMessage(null)\n          }, 5000);\n        })\n        .catch(error => {\n          setErrorMessage(error.response.data.error);\n          setTimeout( () => {\n            setErrorMessage(null)\n          }, 5000);\n        })\n\n    }\n  }\n\n  const updatePerson = (id, newObject) => {\n    const person = persons.find( (person) => person.id === id); \n    personService \n      .update(person.id, newObject)\n      .then( (returnedPerson) => {\n        console.log(returnedPerson);\n        const newPersonsArray = persons.map( (person) => person.id !== id ? person : returnedPerson);\n        setPersons(newPersonsArray);\n      })\n      .catch( (error) => {\n        setErrorMessage(`Sorry, but you cannot update this person: ${person.name}.`);\n        setTimeout( () => {\n          setErrorMessage(null)\n        }, 5000);\n      })\n  }\n\n\n  const deletePerson = (id) => {\n    const index = persons.findIndex( (person) => person.id === id);\n    const person = persons.find( (person) => person.id === id);\n    const userWantsToDelete = window.confirm(`Do you really want to delete ${person.name}`)\n\n    if (userWantsToDelete) {\n      const personsCopy = [ ...persons ];\n      personsCopy.splice(index, 1);\n\n      personService\n        .remove(id)\n        .then( (response) => {\n          setErrorMessage(`${person.name} was deleted.`)\n          setPersons(personsCopy);\n        })\n    } else {\n      return;\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter \n        search={newSearch} \n        handleSearchChange={handleSearchChange}\n      />\n\n      <h2>Add a New Contact</h2>\n      <Notification message={successMessage} type=\"success\"/>\n      <Notification message={errorMessage} type=\"error\" />\n      <PersonForm \n        add={addPerson}\n        name={newName}\n        number={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <Persons \n        contactsToShow={contactsToShow}\n        deletePerson={deletePerson}\n      />\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}