{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","props","value","search","onChange","handleSearchChange","PersonForm","onSubmit","add","name","handleNameChange","number","handleNumberChange","type","Persons","contactsToShow","map","person","key","id","onClick","deletePerson","Notification","message","className","baseUrl","axios","get","then","response","data","newObject","post","request","put","console","log","delete","App","useState","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","persons","setPersons","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","filter","toLowerCase","includes","updatePerson","find","returnedPerson","newPersonsArray","catch","error","event","target","preventDefault","nameObject","some","window","confirm","concat","setTimeout","index","findIndex","personsCopy","splice","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8b4784fd.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = (props) => {\n    return (\n        <div>\n            Filter shown with: <input \n                                value={props.search}\n                                onChange={props.handleSearchChange}\n                                />\n        </div>\n    )\n\n}\n\nexport default Filter;","import React from \"react\";\n\nconst PersonForm = (props) => {\n    return (\n        <form onSubmit={props.add}>\n            <div>\n                Name: <input \n                        value={props.name}\n                        onChange={props.handleNameChange}/>\n            </div>\n            <div>\n                Number: <input \n                        value={props.number}\n                        onChange={props.handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">Add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm;","import React from \"react\";\n\nconst Persons = (props) => {\n    return(\n        <div>\n            {props.contactsToShow.map( (person) => \n                <div key={person.id}>\n                    <p key={person.id}>{person.name}: {person.number}</p>\n                    <button onClick={() => props.deletePerson(person.id)}>Delete Person</button>\n                </div>\n            )}\n        </div>\n    )\n}\nexport default Persons;","import React from \"react\";\n\nconst Notification = ( {message, type} ) => {\n    if (message === null) {\n        return null;\n    }\n\n    return (\n        <div className={type}>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification;","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then(response => response.data);\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then(response => response.data);\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    console.log(\"Request:\", request);\n    console.log(\"New person: \", newObject);\n    const response = request.then(response => response.data);\n    console.log(response);\n    return response;\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then(response => response.data);\n}\n\nexport default { getAll, create, update, remove };","import React, {useState, useEffect} from 'react';\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newSearch, setNewSearch] = useState(\"\");\n  const [persons, setPersons] = useState([]);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // Populate data after rendering for the first time.\n  useEffect( () => {\n    personService \n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons);\n      })\n  }, []);\n\n  // Form change handlers\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  const handleSearchChange = (event) => {\n    setNewSearch(event.target.value);\n  }\n\n  // CRUD methods\n  const contactsToShow = persons.filter( (person) => person.name.toLowerCase().includes(newSearch.toLowerCase()));\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    if (persons.some( (person) => person.name === newName)){\n      const userWantsToUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with the new one?`);\n      if (userWantsToUpdate) {\n        const person = persons.find( (person) => person.name === newName);\n        updatePerson(person.id, nameObject);\n      }\n    } else {\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n        })\n      setSuccessMessage(`${nameObject.name} was successfully added to the database.`)\n      setTimeout( () => {\n        setSuccessMessage(null)\n      }, 5000);\n    }\n  }\n\n  const updatePerson = (id, newObject) => {\n    const person = persons.find( (person) => person.id === id); \n    console.log(\"Moin\");\n    console.log(person);\n    personService \n      .update(person.id, newObject)\n      .then( (returnedPerson) => {\n        console.log(returnedPerson);\n        const newPersonsArray = persons.map( (person) => person.id !== id ? person : returnedPerson);\n        setPersons(newPersonsArray);\n      })\n      .catch( (error) => {\n        setErrorMessage(`Sorry, but you cannot update this person: ${person.name}.`);\n        //setPersons(persons.filter( (person) => person.id !== id));\n      })\n  }\n\n\n  const deletePerson = (id) => {\n    const index = persons.findIndex( (person) => person.id === id);\n    const person = persons.find( (person) => person.id === id);\n    const userWantsToDelete = window.confirm(`Do you really want to delete ${person.name}`)\n\n    if (userWantsToDelete) {\n      const personsCopy = [ ...persons ];\n      personsCopy.splice(index, 1);\n\n      personService\n        .remove(id)\n        .then( (response) => {\n          setErrorMessage(`${person.name} was deleted.`)\n          setPersons(personsCopy);\n        })\n    } else {\n      return;\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter \n        search={newSearch} \n        handleSearchChange={handleSearchChange}\n      />\n\n      <h2>Add a New Contact</h2>\n      <Notification message={successMessage} type=\"success\"/>\n      <Notification message={errorMessage} type=\"error\" />\n      <PersonForm \n        add={addPerson}\n        name={newName}\n        number={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <Persons \n        contactsToShow={contactsToShow}\n        deletePerson={deletePerson}\n      />\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}